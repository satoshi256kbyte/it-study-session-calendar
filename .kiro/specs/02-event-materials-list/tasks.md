# 実装計画

- [x] 1. TypeScript型定義の作成
  - EventWithMaterials、Materialインターフェースを定義
  - connpassイベントで資料があるもののみを対象とした型制約を含める
  - _要件: 1.2, 2.1_

- [x] 2. バックエンドAPI実装
  - [x] 2.1 DynamoDBサービスの拡張
    - connpassイベントで資料があるもののみを取得するクエリメソッドを実装
    - 日付範囲フィルタリング機能を追加
    - _要件: 1.2, 6.1, 6.3_

  - [x] 2.2 イベント資料取得APIハンドラーの実装
    - GET /api/events/materials エンドポイントを作成
    - connpassイベントかつ資料ありのフィルタリングロジックを実装
    - エラーハンドリングとログ出力を追加
    - _要件: 1.2, 5.3, 6.5_

  - [x] 2.3 connpass資料取得バッチ処理の実装
    - Secrets Managerからconnpass APIキーを取得する機能を実装
    - connpass API v2を呼び出して資料データを取得する機能を実装
    - レート制限（1秒あたり1リクエスト）を遵守する実装
    - DynamoDBに資料データを保存する機能を実装
    - _要件: 6.1, 6.2, 6.3, 6.6_

  - [x] 2.4 APIのテスト実装
    - ユニットテストでフィルタリングロジックをテスト
    - 統合テストでDynamoDB連携をテスト
    - バッチ処理のテスト（Secrets Manager連携含む）
    - _要件: 1.2, 5.3, 6.2_

- [x] 3. フロントエンドコンポーネント実装
  - [x] 3.1 EventMaterialsList基本コンポーネントの作成
    - APIからデータを取得する非同期処理を実装
    - シンプルなローディング状態の表示
    - エラー状態とリトライ機能を実装
    - _要件: 1.1, 5.1, 5.2, 5.3_

  - [x] 3.2 EventMaterialsTableコンポーネントの実装
    - テーブル形式でのイベント表示機能
    - イベント名、開催日時、資料の列を実装
    - 日付フォーマット（YYYY/MM/DD）を実装
    - _要件: 2.1, 2.2, 2.3_

  - [x] 3.3 MaterialLinkコンポーネントの実装
    - 資料リンクの表示機能
    - サムネイル表示（利用可能な場合のみ）
    - 新しいタブで開く機能
    - 過度な視覚効果を避けたシンプルな実装
    - _要件: 3.1, 3.2, 3.3, 3.4_

- [x] 4. レスポンシブデザインの実装
  - [x] 4.1 モバイル対応のテーブルスタイリング
    - 小画面でのテーブル表示最適化
    - 水平スクロール機能の実装
    - タッチターゲットの適切なサイズ設定
    - _要件: 4.1, 4.2, 4.3, 4.4_

  - [x] 4.2 レスポンシブレイアウトのテスト
    - 各デバイスサイズでの表示確認
    - タッチ操作の動作確認
    - _要件: 4.1, 4.4_

- [x] 5. メインページへの統合
  - [x] 5.1 カレンダーページにEventMaterialsListを追加
    - Googleカレンダーの下部に配置
    - 非同期読み込みでカレンダー表示をブロックしない実装
    - _要件: 1.1, 5.1_

  - [x] 5.2 統合テストの実装
    - ページ全体での動作確認
    - カレンダーとの共存確認
    - _要件: 1.1, 5.1_

- [x] 6. エラーハンドリングと最適化
  - [x] 6.1 包括的なエラーハンドリング
    - ネットワークエラー時の適切なメッセージ表示
    - データなし時の「該当期間に資料のあるconnpassイベントがありません」メッセージ
    - _要件: 5.3, 5.5_

  - [x] 6.2 パフォーマンス最適化
    - データキャッシュの実装（SWRまたはReact Query）
    - 不要な再レンダリングの防止
    - _要件: 5.1, 5.2_

- [x] 7. テスト実装とデバッグ
  - [x] 7.1 E2Eテストの作成
    - カレンダーページでのイベント資料一覧表示テスト
    - 資料リンクの動作テスト
    - レスポンシブ表示のテスト
    - _要件: 1.1, 3.3, 4.1_

  - [x] 7.2 バグ修正と最終調整
    - テスト結果に基づく修正
    - パフォーマンスの最終調整
    - _要件: 全要件_

- [x] 8. connpass資料取得バッチ処理の実装
  - [x] 8.1 connpass APIクライアントサービスの実装
    - connpass API v2への認証付きHTTPリクエスト機能
    - レート制限（1秒あたり1リクエスト）の実装
    - APIレスポンスの型安全な解析
    - _要件: 6.1, 6.6_

  - [x] 8.2 AWS Secrets Manager統合の実装
    - connpass APIキーの安全な取得機能
    - エラーハンドリングとフォールバック処理
    - _要件: 6.2_

  - [x] 8.3 バッチ処理Lambda関数の実装
    - EventBridge経由での日次実行
    - connpassイベントからの資料データ取得
    - DynamoDBへの資料データ保存・更新
    - _要件: 6.1, 6.3, 6.4_

  - [x] 8.4 バッチ処理のテスト実装
    - connpass API統合テスト（モック使用）
    - Secrets Manager統合テスト
    - DynamoDB更新処理のテスト
    - _要件: 6.1, 6.2, 6.3_

- [x] 9. インフラストラクチャの実装（CDK）
  - [x] 9.1 EventBridge Ruleの追加
    - 日次バッチ実行スケジュールの設定
    - バッチLambda関数のトリガー設定
    - _要件: 6.1_

  - [x] 9.2 Secrets Managerリソースの追加
    - connpass APIキー保存用シークレットの作成
    - バッチLambda関数へのアクセス権限設定
    - _要件: 6.2_

  - [x] 9.3 Lambda関数の権限設定
    - DynamoDB読み書き権限
    - Secrets Manager読み取り権限
    - CloudWatch Logs書き込み権限
    - _要件: 6.1, 6.2, 6.3_
