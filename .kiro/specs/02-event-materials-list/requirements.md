# 要件定義書

## 概要

この機能は、IT勉強会カレンダーアプリケーションのイベント資料一覧機能を実装します。イベント資料一覧は、バッチ処理でconnpass
APIから事前に取得した発表資料と共に、connpassイベントで資料があるもののみを表示し、メインページのGoogleカレンダーの下部に表示されます。connpass以外のイベントや資料がないイベントは表示対象外とします。この機能により、ユーザーは過去の勉強会やイベントの発表資料に簡単にアクセスできるようになります。

## 要件

### 要件1

**ユーザーストーリー:**
カレンダーページを訪問するユーザーとして、カレンダーの下にconnpassイベントで資料があるもののみの一覧を見たい。そうすることで、過去の勉強会の発表スライドやリソースに簡単にアクセスできるようになる。

#### 受入基準

1. ユーザーがメインカレンダーページを訪問した時、システムはGoogleカレンダーの下にイベント資料一覧セクションを表示しなければならない
2. イベント資料一覧が読み込まれる時、システムは過去6ヶ月分のconnpassイベントで資料があるもののみを表示しなければならない
3. イベントを表示する時、システムはイベント開催日の降順（最新が最初）でイベントを表示しなければならない
4. connpass以外のイベントや資料がないイベントは、システムは一覧に表示してはならない

### 要件2

**ユーザーストーリー:**
イベント資料一覧を閲覧するユーザーとして、テーブル形式で重要なイベント情報を見たい。そうすることで、イベントを素早く識別し、その資料にアクセスできるようになる。

#### 受入基準

1. イベント資料一覧を表示する時、システムは以下の列を持つテーブル形式でイベントを表示しなければならない：イベント名、開催日時、資料
2. イベント名を表示する時、システムは元のイベントページへのクリック可能なリンクとして完全なイベントタイトルを表示しなければならない
3. イベント日時を表示する時、システムは日本のロケールでYYYY/MM/DD形式で日付をフォーマットしなければならない4.資料を表示する時、システムは利用可能な場合はサムネイル付きの資料リンクを表示しなければならない
4. イベントに複数の資料が存在する時、システムはすべての資料を個別のリンクとして表示しなければならない

### 要件3

**ユーザーストーリー:**
特定のイベント資料を探しているユーザーとして、シンプルな資料リンクを見たい。そうすることで、興味のあるコンテンツを簡単に識別してアクセスできるようになる。

#### 受入基準

1. イベントに資料が利用可能な時、システムは各資料をクリック可能なリンクとして表示しなければならない
2. 資料にサムネイルが利用可能な時、システムはリンクと一緒にサムネイル画像を表示しなければならない
3. 資料リンクがクリックされた時、システムは新しいタブ/ウィンドウで資料を開かなければならない
4. 過度な視覚効果は使用せず、システムはシンプルな表示を維持しなければならない

### 要件4

**ユーザーストーリー:**
モバイルデバイスを使用するユーザーとして、イベント資料一覧がレスポンシブでアクセシブルであることを望む。そうすることで、どのデバイスでも快適に資料を閲覧できるようになる。

#### 受入基準

1. モバイルデバイスで表示する時、システムは画面に収まるレスポンシブ形式でテーブルを表示しなければならない
2. テーブルコンテンツがオーバーフローする時、システムは水平スクロール機能を提供しなければならない
3. 小さな画面で表示する時、システムはイベント名と日付の可読性を維持しなければならない
4. タッチデバイスで資料リンクと相互作用する時、システムは適切なタッチターゲットを提供しなければならない

### 要件5

**ユーザーストーリー:**
ネットワーク状況が遅いユーザーとして、イベント資料一覧が効率的に読み込まれることを望む。そうすることで、長い待機時間なしに情報にアクセスできるようになる。

#### 受入基準

1. ページが読み込まれる時、システムはカレンダー表示をブロックすることなく非同期でイベントデータを取得しなければならない
2. イベントデータが読み込み中の時、システムはシンプルなローディング表示を行わなければならない
3. イベントデータの読み込みに失敗した時、システムは再試行オプション付きのエラーメッセージを表示しなければならない
4. 失敗したリクエストを再試行する時、システムはイベントデータの再読み込みを試行しなければならない
5. イベントが見つからない時、システムは「該当期間に資料のあるconnpassイベントがありません」メッセージを表示しなければならない

### 要件6

**ユーザーストーリー:** システム管理者として、イベント資料がconnpass
APIから自動的に更新されることを望む。そうすることで、最新の資料が常にユーザーに利用可能になる。

#### 受入基準

1. イベントにconnpass URLがある時、バッチ処理でconnpass API v2から資料データを取得しなければならない
2. APIデータが取得された時、システムはタイトル、URL、サムネイルを含む資料情報を保存しなければならない
3. connpassで資料データが変更された時、システムは次回のバッチ実行時に保存された情報を更新しなければならない
4. APIリクエストが失敗した時、システムはエラーをログに記録し、利用可能な場合はキャッシュされたデータで継続しなければならない
5. レート制限に遭遇した時、システムはconnpass
   APIドキュメントで指定された1秒あたり1リクエストの制限を尊重しなければならない
6. エンドユーザー画面からconnpass APIを直接呼び出してはならない
