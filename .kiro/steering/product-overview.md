# IT勉強会カレンダー

## 概要

IT関連の勉強会やイベントをカレンダー表示するウェブアプリケーションです。

### 主な機能

- Googleカレンダーを使用したイベント表示
- フォームからの勉強会スケジュール登録
- 管理画面での承認フローによるGoogleカレンダーへの自動登録
- connpass APIを活用したイベント資料の自動取得・表示

## システム設計

### エンドユーザー向けシステム

#### 技術スタック

- **フロントエンド**: Next.js、TypeScript、Tailwind CSS
- **ホスティング**: GitHub Pages
- **カレンダー**: Googleカレンダー埋め込み

#### ページ構成

1. **ホーム（カレンダー画面）**
   - **画面上部**: Googleカレンダーの埋め込み表示
   - **画面下部**: イベントごとの資料一覧テーブル

2. **勉強会登録**
   - 勉強会情報入力フォーム
     - タイトル
     - ページリンク（主にconnpass URL）
     - 開催日時
   - 管理者向け勉強会登録APIへのPOSTリクエスト送信

#### カレンダー画面の詳細構成

**上部: Googleカレンダー**

- Googleカレンダーの埋め込み表示

**上部右: 各種ボタン**

- X（旧Twitter）へのシェアボタンでは、当月かつ現在日以降の勉強会の日付（MM/DD）とタイトルのリストと、カレンダー画面のURLをシェアする

**下部: イベント資料一覧**

- **表示対象**: 現在から過去6ヶ月分のイベント
- **表示形式**: テーブル形式での一覧表示
- **表示項目**:
  - イベント名
  - 開催日時（年月日）
  - 資料リンク（サムネイル付き可能）
- **並び順**: イベント開催日時の降順

### 管理者向けシステム

#### 技術スタック

- **フロントエンド**: Next.js、TypeScript、Tailwind CSS
- **ホスティング**: Amazon S3 + CloudFront
- **バックエンド**: Amazon API Gateway + AWS Lambda
- **データベース**: DynamoDB
- **IaC**: AWS CDK（TypeScript）

#### ページ構成

1. **勉強会一覧**
   - 勉強会情報表示（タイトル、開催日時、ページリンク）
   - 登録状況表示（未承認、承認済み）
   - アクション実行（承認/却下/削除）

2. **勉強会承認**
   - Google Calendar APIを使用したイベント登録
   - 環境変数での認証情報管理（カレンダーID、APIキー）

### イベント資料取得システム

#### バッチ処理概要

- **実行タイミング**: 毎日日本時間24:00
- **実行基盤**: Amazon EventBridge
- **処理対象**: connpass URLが登録されたイベント（過去6ヶ月分）

#### 処理フロー

1. DynamoDBからconnpass URLを持つイベントを取得
2. connpass APIから資料情報を取得
3. 取得した資料リンクをDynamoDBに保存（JSON形式で複数保存）
4. イベント情報の差分がある場合はAPI情報で上書き更新

#### 認証情報管理

- **バッチ処理**: AWS Secrets Manager（CDKで箱のみ作成、手動設定）
- **エンドユーザー画面**: GitHub Secrets（手動設定）

#### データ整合性

- connpassページ更新時の自動補正機能
- API取得情報を正として既存データを上書き

## リポジトリ構成

モノレポ構成を採用し、以下のディレクトリ構造で管理します。

```bash
├── calendar/           # エンドユーザー向け画面（GitHub Pages）
├── admin-frontend/     # 管理者画面フロントエンド（S3 + CloudFront）
├── admin-backend/      # 管理者画面バックエンド（Lambda + API Gateway）
└── cdk/               # インフラ構成（AWS CDK）
```

### 各ディレクトリの役割

- **calendar/**: エンドユーザー向けWebアプリケーション
- **admin-frontend/**: 管理者向けWebアプリケーション
- **admin-backend/**: 管理者向けAPI・バッチ処理
- **cdk/**: AWSリソースの定義・デプロイ
